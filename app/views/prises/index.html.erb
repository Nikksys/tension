<p id="notice"><%= notice %></p>

<h1>Prises</h1>

<table id="reading">
  <thead>
    <tr>
      <th>Date</th>
      <th>periode</th>
      <th>Sys</th>
      <th>Dia</th>
      <th>Pulse</th>
      <th>Note</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @prises.each do |prise| %>
      <tr class="data-row">
        <td><%= prise.moment.strftime("%d-%m-%Y") %></td>
        <td><%= image_tag( prise.moment?, class: "periode") %></td>
        <td class="syss"><%= prise.sys %></td>
        <td class="dias"><%= prise.dia %></td>
        <td class="pulses"><%= prise.pulse %></td>
        <td><%= prise.note %></td>
        <td><%= link_to image_tag("eye.svg", class: "table-icon"), prise %></td>
        <td><%= link_to image_tag("edit.svg", class: "table-icon"), edit_prise_path(prise) %></td>
        <td><%= link_to image_tag("trash-alt.svg", class: "table-icon-del"), prise, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>




<script type="text/javascript">
  
  var allSys = document.querySelectorAll(".syss")
   allSys.forEach((item, i) => {
     if (parseFloat(allSys[i].innerText) >= 14.5) {
       allSys[i].style.color = "red";
     } else {
       allSys[i].style.color = "green";
     }
   });
  var allDias = document.querySelectorAll(".dias")  
   allDias.forEach((item, i) => {
     if (parseFloat(allDias[i].innerText) >= 9.0) {
       allDias[i].style.color = "red";
     } else {
       allDias[i].style.color = "green";  
     }
   });
   var allPulse = document.querySelectorAll(".pulses")  
    allPulse.forEach((item, i) => {
      if (parseFloat(allPulse[i].innerText) >= 100) {
        allPulse[i].style.color = "red";
      } else {
        allPulse[i].style.color = "green";  
      }
    });
    
  
   var dataRows = document.querySelectorAll(".data-row")
   dataRows.forEach((item, i) => {
     if (dataRows[i].nextElementSibling != null) {
       if (dataRows[i].cells[0].innerHTML != dataRows[i].nextElementSibling.cells[0].innerHTML) {
         dataRows[i].style.borderBottom = "1px solid ";
       }
     }
   });
   
   
   
</script>
